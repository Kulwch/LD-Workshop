import{a as m}from"./index.4db902b9.js";import{o as r,c as s,a as t,q as l,d,e as p,r as c,b as h,w as v,F as w,f as u}from"./vendor.d628d85d.js";import{_ as g}from"./index.aea7edd6.js";import"./axios.edddaafe.js";const y={name:"postMediaForm",data(){return{drawingShow:!1,photoShow:!1,paintingShow:!1,userId:localStorage.getItem("userId"),title:"",text:"",imageUrl:"",photo:"",drawing:"",painting:"",category:"",token:localStorage.getItem("token")}},methods:{handleDrawingFileUpload(){this.drawing=this.$refs.drawing.files[0],this.drawingUrl=URL.createObjectURL(this.drawing)},postDrawing(){const o=new FormData;o.append("userId",parseInt(localStorage.getItem("userId"))),o.append("title",document.getElementById("title").value),o.append("text",document.getElementById("text").value),o.append("drawing",this.drawing),o.append("category",this.$refs.category.value),m.post("http://localhost:3001/api/drawings",o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.token}}).then(()=>this.$router.go())},handlePhotoFileUpload(){this.photo=this.$refs.photo.files[0],this.photoUrl=URL.createObjectURL(this.photo)},postPhoto(){const o=new FormData;o.append("userId",parseInt(localStorage.getItem("userId"))),o.append("title",document.getElementById("title").value),o.append("text",document.getElementById("text").value),o.append("photo",this.photo),m.post("http://localhost:3001/api/photos",o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.token}}).then(()=>this.$router.go())},handlePaintingFileUpload(){this.painting=this.$refs.painting.files[0],this.paintingUrl=URL.createObjectURL(this.painting)},postPainting(){const o=new FormData;o.append("userId",parseInt(localStorage.getItem("userId"))),o.append("title",document.getElementById("title").value),o.append("text",document.getElementById("text").value),o.append("painting",this.painting),o.append("category",this.$refs.category.value),m.post("http://localhost:3001/api/paintings",o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.token}}).then(()=>this.$router.go())}}},x={class:"col-md-10 mx-auto border border-dark rounded shadow"},I=t("h2",{class:"h2 mt-2"},"Pour publier un media, choisis son type :",-1),k=p('<div class="mx-auto w-50 mb-3"><label for="title" class="form-label">Titre :</label><input type="text" class="form-control" id="title" placeholder="Tape ici ton titre..."></div><div class="mx-auto w-50 mb-3"><label for="statusText" class="form-label">Texte :</label><input type="text" class="form-control" id="text" placeholder="Tape ici ton texte..."></div>',2),S={class:"w-50 mx-auto mb-3"},P=t("label",{for:"drawing",class:"form-label pr-1"},"Fichier \xE0 publier :",-1),C={id:"category",name:"category",ref:"category"},T=p('<option default="">Choisir une cat\xE9gorie:</option><option value="Enluminure">Graphite</option><option value="Aquarelle">Crayons couleurs</option><option value="Acrylique">Charbon</option><option value="Acrylique">Art digital</option>',5),F=[T],A=p('<div class="mx-auto w-50 mb-3"><label for="title" class="form-label">Titre :</label><input type="text" class="form-control" id="title" placeholder="Tape ici ton titre..."></div><div class="mx-auto w-50 mb-3"><label for="statusText" class="form-label">Texte :</label><input type="text" class="form-control" id="text" placeholder="Tape ici ton texte..."></div>',2),U={class:"w-50 mx-auto mb-3"},D=t("label",{for:"photo",class:"form-label pr-1"},"Fichier \xE0 publier :",-1),B=p('<div class="mx-auto w-50 mb-3"><label for="title" class="form-label">Titre :</label><input type="text" class="form-control" id="title" placeholder="Tape ici ton titre..."></div><div class="mx-auto w-50 mb-3"><label for="statusText" class="form-label">Texte :</label><input type="text" class="form-control" id="text" placeholder="Tape ici ton texte..."></div>',2),$={class:"w-50 mx-auto mb-3"},E=t("label",{for:"painting",class:"form-label pr-1"},"Fichier \xE0 publier :",-1),q={class:"w-50 mx-auto mb-3"},j=t("p",{class:"form-label pr-1"},"Cat\xE9gorie :",-1),L={id:"category",name:"category",ref:"category"},R=t("option",{default:""},"Choisir une cat\xE9gorie:",-1),M=t("option",{value:"Enluminure"},"Enluminure",-1),N=t("option",{value:"Aquarelle"},"Aquarelle",-1),V=t("option",{value:"Acrylique"},"Acrylique",-1),z=[R,M,N,V];function O(o,e,b,f,a,n){return r(),s("div",x,[I,t("button",{class:"btn btn-primary mt-3 mb-3",onClick:e[0]||(e[0]=i=>a.drawingShow=!a.drawingShow)}," Dessin "),t("button",{class:"btn btn-primary mt-3 mb-3",onClick:e[1]||(e[1]=i=>a.photoShow=!a.photoShow)}," Photo "),t("button",{class:"btn btn-primary mt-3 mb-3",onClick:e[2]||(e[2]=i=>a.paintingShow=!a.paintingShow)}," Peinture "),a.drawingShow?(r(),s("form",{key:0,id:"formDrawing",class:"mt-5",onSubmit:e[5]||(e[5]=l(i=>n.postDrawing(),["prevent"])),enctype:"multipart/form-data"},[k,t("div",S,[P,t("input",{type:"file",class:"form-control-file mx-auto",id:"drawing",name:"drawing",ref:"drawing",onChange:e[3]||(e[3]=i=>n.handleDrawingFileUpload())},null,544)]),t("select",C,F,512),t("button",{type:"submit",class:"btn btn-primary mb-3",onClick:e[4]||(e[4]=l((...i)=>n.postDrawing&&n.postDrawing(...i),["prevent"]))}," Publier ")],32)):d("",!0),a.photoShow?(r(),s("form",{key:1,id:"form",class:"mt-5",onSubmit:e[8]||(e[8]=l(i=>n.postPhoto(),["prevent"])),enctype:"multipart/form-data"},[A,t("div",U,[D,t("input",{type:"file",class:"form-control-file mx-auto",id:"photo",name:"photo",ref:"photo",onChange:e[6]||(e[6]=i=>n.handlePhotoFileUpload())},null,544)]),t("button",{type:"submit",class:"btn btn-primary mb-3",onClick:e[7]||(e[7]=l((...i)=>n.postPhoto&&n.postPhoto(...i),["prevent"]))}," Publier ")],32)):d("",!0),a.paintingShow?(r(),s("form",{key:2,id:"formPainting",class:"mt-5",onSubmit:e[11]||(e[11]=l(i=>n.postPainting(),["prevent"])),enctype:"multipart/form-data"},[B,t("div",$,[E,t("input",{type:"file",class:"form-control-file mx-auto",id:"painting",name:"painting",ref:"painting",onChange:e[9]||(e[9]=i=>n.handlePaintingFileUpload())},null,544)]),t("div",q,[j,t("select",L,z,512)]),t("button",{type:"submit",class:"btn btn-primary mb-3",onClick:e[10]||(e[10]=l((...i)=>n.postPainting&&n.postPainting(...i),["prevent"]))}," Publier ")],32)):d("",!0)])}var G=g(y,[["render",O]]);const W={name:"post",components:{postMediaForm:G},data(){return{userId:localStorage.getItem("userId"),users:[],user:{id:localStorage.getItem("userId"),isAdmin:localStorage.getItem("isAdmin")},token:localStorage.getItem("token")}}},H={key:0,id:"posts",class:"row"},J={class:"col"},K=t("h1",{class:"h1"},"Publier un media sur le site :",-1),Q={key:1,id:"notAllowed"},X=u(" Acc\xE8s r\xE9serv\xE9 Admin - merci de retourner "),Y=t("br",null,null,-1),Z=u(" \xE0 l'"),tt=u("accueil");function et(o,e,b,f,a,n){const i=c("postMediaForm"),_=c("router-link");return r(),s(w,null,[a.user.isAdmin=="true"?(r(),s("div",H,[t("div",J,[K,h(i)])])):d("",!0),a.token?d("",!0):(r(),s("div",Q,[t("h1",null,[X,Y,Z,h(_,{to:"/LD-Workshop/"},{default:v(()=>[tt]),_:1})])]))],64)}var rt=g(W,[["render",et]]);export{rt as default};
