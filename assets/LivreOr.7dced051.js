import{a as i}from"./index.4db902b9.js";import{_ as d}from"./index.aea7edd6.js";import{o as s,c as a,a as e,r as f,b,F as h,m as v,p as $,f as u,t as m,q as x,d as N}from"./vendor.d628d85d.js";import"./axios.edddaafe.js";const g={name:"postComment",data(){return{userId:localStorage.getItem("userId"),token:localStorage.getItem("token"),text:"",authorFirstName:"",authorLastName:"",email:"",phone:""}},methods:{postComment(t){i.post("http://localhost:3001/api/comments",{text:this.$refs.text.value,authorFirstName:this.$refs.authorFirstName.value,authorLastName:this.$refs.authorLastName.value,email:this.$refs.email.value,phone:this.$refs.phone.value,headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token}}).then(()=>this.$router.go())}}},C={class:"col col-md-8 mx-auto mt-2 mb-2 border border-dark rounded shadow bg-light"},k=e("h3",{class:"h5 mt-2"},"Laisser un commentaire dans le Livre d'0r",-1),L={class:"mt-3"},S={class:"mx-auto w-75 h-50 mb-3"},z=e("label",{for:"text",class:"form-label"},"Commentaire :",-1),F={class:"form-control text",name:"text",ref:"text",placeholder:"Tapez ici votre commentaire !"},w=e("label",{for:"authorFirstName",class:"form-label mt-2"},"Pr\xE9nom :",-1),j={class:"form-control authorFirstName w-50 mx-auto",name:"authorFirstName",ref:"authorFirstName",placeholder:"Saisissez votre pr\xE9nom"},y=e("label",{for:"authorLastName",class:"form-label mt-2"},"Pr\xE9nom :",-1),I={class:"form-control authorLastName w-50 mx-auto",name:"authorLastName",ref:"authorLastName",placeholder:"Saisissez votre nom "},A=e("label",{for:"authorEmail",class:"form-label mt-2"},"Email - ne sera pas affich\xE9 dans le livre d'Or :",-1),B={class:"form-control authorEmail w-50 mx-auto",name:"authorEmail",ref:"authorEmail",placeholder:"Saisissez votre email "},E=e("label",{for:"phone",class:"form-label mt-2"},"T\xE9l\xE9phone (facultatif) - ne sera pas affich\xE9 non plus :",-1),P={class:"form-control email w-50 mx-auto",name:"Phone",ref:"Phone",placeholder:"Saisissez votre num\xE9ro de t\xE9l\xE9phone "};function T(t,r,p,_,n,l){return s(),a("div",C,[k,e("form",L,[e("div",S,[z,e("textarea",F,null,512),w,e("input",j,null,512),y,e("input",I,null,512),A,e("input",B,null,512),E,e("input",P,null,512)]),e("button",{type:"submit",class:"btn btn-primary mb-3",onClick:r[0]||(r[0]=c=>l.postComment()),ref:"comment"}," Publier ",512)])])}var O=d(g,[["render",T]]);const V={name:"livreOr",components:{postComments:O},data(){return{token:localStorage.getItem("token"),user:{id:localStorage.getItem("userId"),isAdmin:localStorage.getItem("isAdmin")},comments:[]}},created(){i.get("http://localhost:3001/api/comments",{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.token}}).then(t=>{this.comments=t.data}).catch(t=>{console.log(t+"Commentaires indisponibles")})},methods:{adminDeleteComment(t){i.delete(`http://localhost:3001/api/comments/admin/${t}`,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token}}).then(()=>this.$router.go())}}},D=e("div",{id:"livreOr",class:"row"},[e("div",{class:"col"},[e("h1",{class:"h1"},"Livre d\xA0'Or"),e("br"),e("p",null," Vous avez d\xE9j\xE0 fait appel \xE0 nos services ou talents d'artiste ? N'h\xE9sitez pas \xE0 laisser un commentaire (dans le respect d\xFB \xE0 un \xEAtre humain) afin de nous aider \xE0 proposer des services toujours plus proches de vos besoins. ")])],-1),q={class:"col"},M={class:"col-10 mx-auto border border-dark rounded shadow mt-3"},G={class:"mt-2 mb-2"},H=e("br",null,null,-1),J=e("br",null,null,-1),K=u(" par "),Q=e("br",null,null,-1),R=["onClick"];function U(t,r,p,_,n,l){const c=f("postComments");return s(),a(h,null,[D,b(c),e("div",q,[(s(!0),a(h,null,v(n.comments.slice().reverse(),o=>(s(),a("div",$({key:o.id},o),[e("div",M,[e("p",G,[u(' "'+m(o.text)+'" ',1),H,J,e("span",null,[K,e("strong",null,m(o.authorFirstName)+" "+m(o.authorLastName),1)]),Q]),n.user.isAdmin?(s(),a("button",{key:0,class:"mb-2 rounded",onClick:x(W=>l.adminDeleteComment(o.id),["prevent"])}," Supprimer ",8,R)):N("",!0)])],16))),128))])],64)}var te=d(V,[["render",U]]);export{te as default};
